<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Pencil configurations · PencilArrays.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://jipolanco.github.io/PencilArrays.jl/Pencils/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/><script src="../assets/tomate.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="PencilArrays.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PencilArrays.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../MPITopology/">MPI topology</a></li><li class="is-active"><a class="tocitem" href>Pencil configurations</a><ul class="internal"><li><a class="tocitem" href="#Construction"><span>Construction</span></a></li><li><a class="tocitem" href="#Dimension-permutations"><span>Dimension permutations</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li></ul></li><li><a class="tocitem" href="../PencilArrays/">Array wrappers</a></li><li><a class="tocitem" href="../Transpositions/">Global MPI operations</a></li><li><a class="tocitem" href="../PencilIO/">Parallel I/O</a></li><li><a class="tocitem" href="../PencilArrays_timers/">Measuring performance</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Pencil configurations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Pencil configurations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/jipolanco/PencilArrays.jl/blob/master/docs/src/Pencils.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="sec:pencil_configs"><a class="docs-heading-anchor" href="#sec:pencil_configs">Pencil configurations</a><a id="sec:pencil_configs-1"></a><a class="docs-heading-anchor-permalink" href="#sec:pencil_configs" title="Permalink"></a></h1><p>A <em>pencil</em> configuration refers to a given distribution of multidimensional data among MPI processes. This information is encoded in the <a href="#PencilArrays.Pencils.Pencil"><code>Pencil</code></a> type.</p><p>A pencil configuration includes:</p><ul><li><a href="../MPITopology/#sec:mpi_topology">MPI topology</a> information,</li><li>global and local dimensions of the numerical grid,</li><li>subset of decomposed dimensions,</li><li>definition of optional permutation of dimensions.</li></ul><h2 id="Construction"><a class="docs-heading-anchor" href="#Construction">Construction</a><a id="Construction-1"></a><a class="docs-heading-anchor-permalink" href="#Construction" title="Permalink"></a></h2><h3 id="High-level-interface"><a class="docs-heading-anchor" href="#High-level-interface">High-level interface</a><a id="High-level-interface-1"></a><a class="docs-heading-anchor-permalink" href="#High-level-interface" title="Permalink"></a></h3><p>The simplest way of constructing a new <a href="#PencilArrays.Pencils.Pencil"><code>Pencil</code></a> is by passing the global dataset dimensions and an MPI communicator to the <code>Pencil</code> constructor:</p><pre><code class="language-julia-repl hljs">julia&gt; dims_global = (16, 32, 64);

julia&gt; comm = MPI.COMM_WORLD;

julia&gt; pen = Pencil(dims_global, comm)
Decomposition of 3D data
    Data dimensions: (16, 32, 64)
    Decomposed dimensions: (2, 3)
    Data permutation: NoPermutation()</code></pre><p>This will decompose the data along the two last dimensions of the dataset:<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup></p><pre><code class="language-julia-repl hljs">julia&gt; decomposition(pen)
(2, 3)</code></pre><p>For instance, if the communicator <code>comm</code> has 4 MPI processes, then each process will hold a subset of data of size <code>(16, 16, 32)</code>:</p><pre><code class="language-julia-repl hljs">julia&gt; topology(pen)
MPI topology: 2D decomposition (2×2 processes)  # assuming MPI.Comm_size(comm) == 4

julia&gt; size_local(pen)
(16, 16, 32)</code></pre><p>Instead of the default, one may want to choose the subset of dimensions that should be decomposed. For instance, to decompose along the first dimension only:</p><pre><code class="language-julia-repl hljs">julia&gt; decomp_dims = (1,);

julia&gt; pen = Pencil(dims_global, decomp_dims, comm)
Decomposition of 3D data
    Data dimensions: (16, 32, 64)
    Decomposed dimensions: (1,)
    Data permutation: NoPermutation()

julia&gt; decomposition(pen)
(1,)

julia&gt; topology(pen)
MPI topology: 1D decomposition (4 processes)  # again, assuming 4 MPI processes</code></pre><h3 id="Low-level-interface"><a class="docs-heading-anchor" href="#Low-level-interface">Low-level interface</a><a id="Low-level-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Low-level-interface" title="Permalink"></a></h3><p>Note that the above high-level constructors don&#39;t require the definition of a <a href="../MPITopology/#PencilArrays.Pencils.MPITopologies.MPITopology"><code>MPITopology</code></a>, which is constructed implicitly. For more control, one may want to manually construct a <code>MPITopology</code>, and then construct a <code>Pencil</code> from that. As above, one may also specify the list of decomposed dimensions.</p><p>For instance, we may want to decompose 32 MPI processes into a 8×4 Cartesian topology. This is done as follows:</p><pre><code class="language-julia-repl hljs">julia&gt; topo = MPITopology(comm, (8, 4))  # NOTE: fails if MPI.Comm_size(comm) ≠ 32
MPI topology: 2D decomposition (8×4 processes)

julia&gt; dims_global = (16, 32, 64);

julia&gt; pen = Pencil(topo, dims_global)
Decomposition of 3D data
    Data dimensions: (16, 32, 64)
    Decomposed dimensions: (2, 3)
    Data permutation: NoPermutation()</code></pre><p>As before, the decomposed dimensions are the rightmost ones by default (in this case, dimensions <code>2</code> and <code>3</code>). A different set of dimensions may be selected via an optional positional argument. For instance, to decompose along dimensions <code>1</code> and <code>3</code> instead:</p><pre><code class="language-julia-repl hljs">julia&gt; decomp_dims = (1, 3);

julia&gt; pen = Pencil(topo, dims_global, decomp_dims)
Decomposition of 3D data
    Data dimensions: (16, 32, 64)
    Decomposed dimensions: (1, 3)
    Data permutation: NoPermutation()</code></pre><h3 id="Defining-multiple-pencils"><a class="docs-heading-anchor" href="#Defining-multiple-pencils">Defining multiple pencils</a><a id="Defining-multiple-pencils-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-multiple-pencils" title="Permalink"></a></h3><p>One may also want to work with multiple pencil configurations that differ, for instance, on the selection of decomposed dimensions. For this case, a constructor is available that takes an already existing <code>Pencil</code> instance. Calling this constructor should be preferred when possible since it allows sharing memory buffers (used for instance for <a href="../Transpositions/#Global-MPI-operations">global transpositions</a>) and thus reducing memory usage. The following creates a <code>Pencil</code> equivalent to the one above, but with different decomposed dimensions:</p><pre><code class="language-julia-repl hljs">julia&gt; pen_y = Pencil(pen; decomp_dims = (1, 3))
Decomposition of 3D data
    Data dimensions: (16, 32, 64)
    Decomposed dimensions: (1, 3)
    Data permutation: NoPermutation()</code></pre><p>See the <a href="#PencilArrays.Pencils.Pencil"><code>Pencil</code></a> documentation for more details.</p><h2 id="Dimension-permutations"><a class="docs-heading-anchor" href="#Dimension-permutations">Dimension permutations</a><a id="Dimension-permutations-1"></a><a class="docs-heading-anchor-permalink" href="#Dimension-permutations" title="Permalink"></a></h2><p>A <code>Pencil</code> may optionally be given information on dimension permutations. In this case, the layout of the data arrays in memory is different from the logical order of dimensions. For performance reasons, permutations are compile-time objects defined in the <a href="https://github.com/jipolanco/StaticPermutations.jl">StaticPermutations</a> package.</p><p>To make permutations clearer, consider the example above where the global data dimensions are <span>$N_x × N_y × N_z = 16 × 32 × 64$</span>. In this case, the logical order is <span>$(x, y, z)$</span>. Now let&#39;s say that we want the memory order of the data to be <span>$(y, z, x)$</span>,<sup class="footnote-reference"><a id="citeref-2" href="#footnote-2">[2]</a></sup> which corresponds to the permutation <code>(2, 3, 1)</code>.</p><p>Permutations are passed to the <code>Pencil</code> constructor via the <code>permute</code> keyword argument. Dimension permutations should be specified using a <a href="https://jipolanco.github.io/StaticPermutations.jl/stable/#StaticPermutations.Permutation"><code>Permutation</code></a> object. For instance,</p><pre><code class="language-julia-repl hljs">julia&gt; perm = Permutation(2, 3, 1);

julia&gt; pen = Pencil(dims_global, comm; permute = perm)
Decomposition of 3D data
    Data dimensions: (16, 32, 64)
    Decomposed dimensions: (2, 3)
    Data permutation: Permutation(2, 3, 1)</code></pre><p>One can also pass a <a href="https://jipolanco.github.io/StaticPermutations.jl/stable/#StaticPermutations.NoPermutation"><code>NoPermutation</code></a> to disable permutations (this is the default).</p><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.Pencil" href="#PencilArrays.Pencils.Pencil"><code>PencilArrays.Pencils.Pencil</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Pencil{N,M}</code></pre><p>Describes the decomposition of an <code>N</code>-dimensional array among MPI processes along <code>M</code> directions (with <code>M &lt; N</code>).</p><hr/><pre><code class="nohighlight hljs">Pencil(
    topology::MPITopology{M}, size_global::Dims{N},
    decomp_dims::Dims{M} = default_decomposition(N, Val(M));
    permute::AbstractPermutation = NoPermutation(),
    timer = TimerOutput(),
)</code></pre><p>Define the decomposition of an <code>N</code>-dimensional geometry along <code>M</code> dimensions.</p><p>The dimensions of the geometry are given by <code>size_global = (N1, N2, ...)</code>. The <code>Pencil</code> describes the decomposition of an array of dimensions <code>size_global</code> across a group of MPI processes.</p><p>Data is distributed over the given <code>M</code>-dimensional MPI topology (with <code>M &lt; N</code>).</p><p>The decomposed dimensions may optionally be provided via the <code>decomp_dims</code> argument. By default, the <code>M</code> rightmost dimensions are decomposed. For instance, for a 2D decomposition of 5D data (<code>M = 2</code> and <code>N = 5</code>), the dimensions <code>(4, 5)</code> are decomposed by default.</p><p>The optional parameter <code>perm</code> should be a (compile-time) tuple defining a permutation of the data indices. Such permutation may be useful for performance reasons, since it may be preferable (e.g. for FFTs) that the data is contiguous along the pencil direction.</p><p>It is also possible to pass a <code>TimerOutput</code> to the constructor. See <a href="../PencilArrays_timers/#PencilArrays.measuring_performance">Measuring performance</a> for details.</p><p><strong>Examples</strong></p><p>Decompose a 3D geometry of global dimensions <span>$N_x × N_y × N_z = 4×8×12$</span> along the second (<span>$y$</span>) and third (<span>$z$</span>) dimensions:</p><pre><code class="language-julia-repl hljs">julia&gt; topo = MPITopology(MPI.COMM_WORLD, Val(2));

julia&gt; Pencil(topo, (4, 8, 12), (2, 3))
Decomposition of 3D data
    Data dimensions: (4, 8, 12)
    Decomposed dimensions: (2, 3)
    Data permutation: NoPermutation()

julia&gt; Pencil(topo, (4, 8, 12), (2, 3); permute = Permutation(3, 2, 1))
Decomposition of 3D data
    Data dimensions: (4, 8, 12)
    Decomposed dimensions: (2, 3)
    Data permutation: Permutation(3, 2, 1)
</code></pre><p>In the second case, the actual data is stored in <code>(z, y, x)</code> order within each MPI process.</p><hr/><pre><code class="nohighlight hljs">Pencil(size_global::Dims{N}, [decomp_dims = (2, …, N)], comm::MPI.Comm; kws...)</code></pre><p>Convenience constructor that implicitly creates a <a href="../MPITopology/#PencilArrays.Pencils.MPITopologies.MPITopology"><code>MPITopology</code></a>.</p><p>The number of decomposed dimensions specified by <code>decomp_dims</code> must be <code>M &lt; N</code>. If <code>decomp_dims</code> is not passed, dimensions <code>2:N</code> are decomposed.</p><p>Keyword arguments are passed to alternative constructor taking an <code>MPITopology</code>. That constructor should be used if more control is desired.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; Pencil((4, 8, 12), MPI.COMM_WORLD)
Decomposition of 3D data
    Data dimensions: (4, 8, 12)
    Decomposed dimensions: (2, 3)
    Data permutation: NoPermutation()

julia&gt; Pencil((4, 8, 12), (1, ), MPI.COMM_WORLD)
Decomposition of 3D data
    Data dimensions: (4, 8, 12)
    Decomposed dimensions: (1,)
    Data permutation: NoPermutation()</code></pre><hr/><pre><code class="nohighlight hljs">Pencil(
    p::Pencil{N,M};
    decomp_dims::Dims{M} = decomposition(p),
    size_global::Dims{N} = size_global(p),
    permute::P = permutation(p),
    timer::TimerOutput = timer(p),
)</code></pre><p>Create new pencil configuration from an existent one.</p><p>This constructor enables sharing temporary data buffers between the two pencil configurations, leading to reduced global memory usage.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL28-L131">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.AbstractIndexOrder" href="#PencilArrays.Pencils.AbstractIndexOrder"><code>PencilArrays.Pencils.AbstractIndexOrder</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractIndexOrder</code></pre><p>Abstract type determining the ordering of dimensions of an array with possibly permuted indices.</p><p>Subtypes are <a href="#PencilArrays.Pencils.MemoryOrder"><code>MemoryOrder</code></a> and <a href="#PencilArrays.Pencils.LogicalOrder"><code>LogicalOrder</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/index_orders.jl#LL1-L8">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.MemoryOrder" href="#PencilArrays.Pencils.MemoryOrder"><code>PencilArrays.Pencils.MemoryOrder</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MemoryOrder &lt;: AbstractIndexOrder</code></pre><p>Singleton type specifying that array dimensions should be given in memory (or <em>permuted</em>) order.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/index_orders.jl#LL11-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.LogicalOrder" href="#PencilArrays.Pencils.LogicalOrder"><code>PencilArrays.Pencils.LogicalOrder</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">LogicalOrder &lt;: AbstractIndexOrder</code></pre><p>Singleton type specifying that array dimensions should be given in logical (or <em>non-permuted</em>) order.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/index_orders.jl#LL19-L24">source</a></section></article><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.topology-Tuple{Pencil}" href="#PencilArrays.Pencils.topology-Tuple{Pencil}"><code>PencilArrays.Pencils.topology</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">topology(p::Pencil)</code></pre><p>Get <a href="../MPITopology/#PencilArrays.Pencils.MPITopologies.MPITopology"><code>MPITopology</code></a> attached to <code>Pencil</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL301-L305">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.MPITopologies.get_comm-Tuple{Pencil}" href="#PencilArrays.Pencils.MPITopologies.get_comm-Tuple{Pencil}"><code>PencilArrays.Pencils.MPITopologies.get_comm</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_comm(p::Pencil)</code></pre><p>Get MPI communicator associated to an MPI decomposition scheme.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL273-L277">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.decomposition-Tuple{Pencil}" href="#PencilArrays.Pencils.decomposition-Tuple{Pencil}"><code>PencilArrays.Pencils.decomposition</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">decomposition(p::Pencil)</code></pre><p>Get tuple with decomposed dimensions of the given pencil configuration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL294-L298">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.permutation-Tuple{Pencil}" href="#PencilArrays.Pencils.permutation-Tuple{Pencil}"><code>PencilArrays.Pencils.permutation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">permutation(::Type{&lt;:Pencil}) -&gt; AbstractPermutation
permutation(p::Pencil)        -&gt; AbstractPermutation</code></pre><p>Get index permutation associated to the given pencil configuration.</p><p>Returns <code>NoPermutation()</code> if there is no associated permutation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL280-L287">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.timer-Tuple{Pencil}" href="#PencilArrays.Pencils.timer-Tuple{Pencil}"><code>PencilArrays.Pencils.timer</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">timer(p::Pencil)</code></pre><p>Get <code>TimerOutput</code> attached to a <code>Pencil</code>.</p><p>See <a href="../PencilArrays_timers/#PencilArrays.measuring_performance">Measuring performance</a> for details.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL254-L260">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.length-Tuple{Pencil}" href="#Base.length-Tuple{Pencil}"><code>Base.length</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">length(p::Pencil)</code></pre><p>Get linear length of data associated to the local pencil layout.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL308-L312">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="Base.ndims-Tuple{Pencil}" href="#Base.ndims-Tuple{Pencil}"><code>Base.ndims</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ndims(p::Pencil)</code></pre><p>Number of spatial dimensions associated to pencil data.</p><p>This corresponds to the total number of dimensions of the space, which includes the decomposed and non-decomposed dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL263-L270">source</a></section><section><div><pre><code class="nohighlight hljs">ndims(t::MPITopology)</code></pre><p>Get dimensionality of Cartesian topology.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/MPITopologies.jl#LL173-L177">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.range_remote-Tuple{Pencil, Integer, LogicalOrder}" href="#PencilArrays.Pencils.range_remote-Tuple{Pencil, Integer, LogicalOrder}"><code>PencilArrays.Pencils.range_remote</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">range_remote(p::Pencil, coords, [order = LogicalOrder()])
range_remote(p::Pencil, n::Integer, [order = LogicalOrder()])</code></pre><p>Get data range held by a given MPI process.</p><p>In the first variant, <code>coords</code> are the coordinates of the MPI process in the Cartesian topology. They can be specified as a tuple <code>(i, j, ...)</code> or as a <code>CartesianIndex</code>.</p><p>In the second variant, <code>n</code> is the linear index of a given process in the topology.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL327-L339">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.range_local-Tuple{Pencil, LogicalOrder}" href="#PencilArrays.Pencils.range_local-Tuple{Pencil, LogicalOrder}"><code>PencilArrays.Pencils.range_local</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">range_local(p::Pencil, [order = LogicalOrder()])</code></pre><p>Local data range held by the pencil.</p><p>By default the dimensions are not permuted, i.e. they follow the logical order of dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL315-L322">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.size_global-Tuple{Pencil, LogicalOrder}" href="#PencilArrays.Pencils.size_global-Tuple{Pencil, LogicalOrder}"><code>PencilArrays.Pencils.size_global</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">size_global(p::Pencil, [order = LogicalOrder()])</code></pre><p>Global dimensions of the Cartesian grid associated to the given domain decomposition.</p><p>Like <a href="../PencilArrays/#PencilArrays.Pencils.size_local-Tuple{Union{PencilArray, Union{Tuple{Vararg{A, N} where N}, AbstractArray{A, N} where N} where A&lt;:PencilArray}}"><code>size_local</code></a>, by default the returned dimensions are in logical order.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL359-L367">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.size_local-Tuple{Pencil, Vararg{Any, N} where N}" href="#PencilArrays.Pencils.size_local-Tuple{Pencil, Vararg{Any, N} where N}"><code>PencilArrays.Pencils.size_local</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">size_local(p::Pencil, [order = LogicalOrder()])</code></pre><p>Local dimensions of the data held by the pencil.</p><p>By default the dimensions are not permuted, i.e. they follow the logical order of dimensions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL349-L356">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="PencilArrays.Pencils.to_local-Tuple{Pencil}" href="#PencilArrays.Pencils.to_local-Tuple{Pencil}"><code>PencilArrays.Pencils.to_local</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">to_local(p::Pencil, global_inds, [order = LogicalOrder()])</code></pre><p>Convert non-permuted (logical) global indices to local indices.</p><p>If <code>order = MemoryOrder()</code>, returned indices will be permuted using the permutation associated to the pencil configuration <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/jipolanco/PencilArrays.jl/blob/0cfa959eea2f680b5f07520daeb38d1976c858fd/src/Pencils/Pencils.jl#LL372-L379">source</a></section></article><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#PencilArrays.Pencils.AbstractIndexOrder"><code>PencilArrays.Pencils.AbstractIndexOrder</code></a></li><li><a href="#PencilArrays.Pencils.LogicalOrder"><code>PencilArrays.Pencils.LogicalOrder</code></a></li><li><a href="#PencilArrays.Pencils.MemoryOrder"><code>PencilArrays.Pencils.MemoryOrder</code></a></li><li><a href="#PencilArrays.Pencils.Pencil"><code>PencilArrays.Pencils.Pencil</code></a></li><li><a href="#Base.length-Tuple{Pencil}"><code>Base.length</code></a></li><li><a href="#Base.ndims-Tuple{Pencil}"><code>Base.ndims</code></a></li><li><a href="#PencilArrays.Pencils.MPITopologies.get_comm-Tuple{Pencil}"><code>PencilArrays.Pencils.MPITopologies.get_comm</code></a></li><li><a href="#PencilArrays.Pencils.decomposition-Tuple{Pencil}"><code>PencilArrays.Pencils.decomposition</code></a></li><li><a href="#PencilArrays.Pencils.permutation-Tuple{Pencil}"><code>PencilArrays.Pencils.permutation</code></a></li><li><a href="#PencilArrays.Pencils.range_local-Tuple{Pencil, LogicalOrder}"><code>PencilArrays.Pencils.range_local</code></a></li><li><a href="#PencilArrays.Pencils.range_remote-Tuple{Pencil, Integer, LogicalOrder}"><code>PencilArrays.Pencils.range_remote</code></a></li><li><a href="#PencilArrays.Pencils.size_global-Tuple{Pencil, LogicalOrder}"><code>PencilArrays.Pencils.size_global</code></a></li><li><a href="#PencilArrays.Pencils.size_local-Tuple{Pencil, Vararg{Any, N} where N}"><code>PencilArrays.Pencils.size_local</code></a></li><li><a href="#PencilArrays.Pencils.timer-Tuple{Pencil}"><code>PencilArrays.Pencils.timer</code></a></li><li><a href="#PencilArrays.Pencils.to_local-Tuple{Pencil}"><code>PencilArrays.Pencils.to_local</code></a></li><li><a href="#PencilArrays.Pencils.topology-Tuple{Pencil}"><code>PencilArrays.Pencils.topology</code></a></li></ul><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>More generally, an <span>$N$</span>-dimensional dataset is by default decomposed along its <span>$N - 1$</span> last dimensions.</li><li class="footnote" id="footnote-2"><a class="tag is-link" href="#citeref-2">2</a>Why would we want this? One application is to efficiently perform FFTs along <span>$y$</span>, which, under this permutation, would be the fastest dimension. This is used by the <a href="https://github.com/jipolanco/PencilFFTs.jl">PencilFFTs</a> package.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../MPITopology/">« MPI topology</a><a class="docs-footer-nextpage" href="../PencilArrays/">Array wrappers »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.5 on <span class="colophon-date" title="Friday 30 July 2021 08:26">Friday 30 July 2021</span>. Using Julia version 1.6.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
